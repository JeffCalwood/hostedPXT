function initWebappServiceWorker(){var r="@relprefix@".replace("---","").replace(/^\//,""),n=-1===r.indexOf("/"),s="makecode;"+r+";@pxtRelId@",t="@cdnUrl@",e=["@targetUrl@/"+r,"@simUrl@","/hostedPXT/semantic.js","/hostedPXT/main.js","/hostedPXT/pxtapp.js","/hostedPXT/typescript.js","/hostedPXT/marked/marked.min.js","/hostedPXT/highlight.js/highlight.pack.js","/hostedPXT/jquery.js","/hostedPXT/pxtlib.js","/hostedPXT/pxtcompiler.js","/hostedPXT/pxtpy.js","/hostedPXT/pxtblockly.js","/hostedPXT/pxtwinrt.js","/hostedPXT/pxteditor.js","/hostedPXT/pxtsim.js","/hostedPXT/pxtembed.js","/hostedPXT/pxtworker.js","/hostedPXT/pxtweb.js","/hostedPXT/blockly.css","/hostedPXT/semantic.css","/hostedPXT/rtlsemantic.css","/hostedPXT/blockly/media/sprites.png","/hostedPXT/blockly/media/click.mp3","/hostedPXT/blockly/media/disconnect.wav","/hostedPXT/blockly/media/delete.mp3","/hostedPXT/vs/loader.js","/hostedPXT/vs/base/worker/workerMain.js","/hostedPXT/vs/basic-languages/bat/bat.js","/hostedPXT/vs/basic-languages/cpp/cpp.js","/hostedPXT/vs/basic-languages/python/python.js","/hostedPXT/vs/basic-languages/markdown/markdown.js","/hostedPXT/vs/editor/editor.main.css","/hostedPXT/vs/editor/editor.main.js","/hostedPXT/vs/editor/editor.main.nls.js","/hostedPXT/vs/language/json/jsonMode.js","/hostedPXT/vs/language/json/jsonWorker.js","/hostedPXT/smoothie/smoothie_compressed.js","/hostedPXT/images/Bars_black.gif","/hostedPXT/gifjs/gif.js","/hostedPXT/ai.0.js","/hostedPXT/target.js","/hostedPXT/fieldeditors.js","/hostedPXT/editor.js","","@targetUrl@/hostedPXT/monacoworker.js","@targetUrl@/hostedPXT/worker.js"],l=b(""),i=b("%2FhostedPXT%2Fdocs%5Cstatic%5Clogo.svg;%2FhostedPXT%2Fdocs%5Cstatic%5Clogo.square.svg;%2FhostedPXT%2Fdocs%5Cstatic%5Clogo.square.svg;%2FhostedPXT%2Fdocs%5Cstatic%5Clogo.square.svg;%2FhostedPXT%2Fdocs%5Cstatic%5Cicons%5Candroid-chrome-192x192.png;%2FhostedPXT%2Fdocs%5Cstatic%5Cicons%5Candroid-chrome-192x192.png;%2FhostedPXT%2Fdocs%5Cstatic%5CMicrosoft-logo_rgb_c-gray-square.png;%2FhostedPXT%2Fdocs%5Cstatic%5CMicrosoft-logo_rgb_c-white.png;%2FhostedPXT%2Fdocs%5Cstatic%5Cgetting-started%5CCN-banner.jpg"),o=c(e.concat(i).map(function(e){return e.trim()}).filter(function(e){return!!e&&0!==e.indexOf("@")})),a=!1;function c(e){for(var n=[],t=0,r=e;t<r.length;t++){var s=r[t];-1===n.indexOf(s)&&n.push(s)}return n}function b(e){var n=String.fromCharCode(64)+"cdnUrl"+String.fromCharCode(64);return c(e.split(";").map(function(e){return decodeURIComponent(e).replace(n,t).trim()}))}self.addEventListener("install",function(e){n?(a=!0,console.log("Installing service worker..."),e.waitUntil(caches.open(s).then(function(e){return console.log("Opened cache"),console.log("Caching:\n"+o.join("\n")),e.addAll(o).then(function(){return e})}).then(function(e){return e.addAll(l).catch(function(e){console.log("Failed to cache hexfiles")})}).then(function(){return self.skipWaiting()}))):console.log("Skipping service worker install for unnamed endpoint")}),self.addEventListener("activate",function(e){n?(console.log("Activating service worker..."),e.waitUntil(caches.keys().then(function(e){var n=e.filter(function(e){var n,t=3!==(n=e.split(";")).length?null:n[1];return null===t||t===r&&e!==s});return Promise.all(n.map(function(e){return caches.delete(e)}))}).then(function(){return a?(a=!1,(e=self).clients.claim().then(function(){return e.clients.matchAll()}).then(function(e){e.forEach(function(e){return e.postMessage({type:"serviceworker",state:"activated",ref:r})})})):Promise.resolve();var e}))):console.log("Skipping service worker activate for unnamed endpoint")}),self.addEventListener("fetch",function(n){n.respondWith(caches.match(n.request).then(function(e){return e||fetch(n.request)}))})}initWebappServiceWorker();
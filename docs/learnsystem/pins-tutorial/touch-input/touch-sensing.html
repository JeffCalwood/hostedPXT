<!DOCTYPE html>
<html lang="" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
	xmlns:fb="http://www.facebook.com/2008/fbml">

<head>
	<meta charset="UTF-8">
	<title>Adafruit Circuit Playground Express - Blocks / Javascript editor</title>
	<meta name="Description" content="A Blocks / JavaScript code editor for the Adafruit Circuit Playground Express." />

	<!-- ifdef incontexttranslations endif -->
	
<!-- include meta.html -->
<!-- This file is typically overriden by the target, with own Twitter
     account etc. Most data is taken from the theme file though.  
  -->

<!-- include robotsmeta.html -->

<!-- end include robotsmeta.html -->

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@msmakecode" />
<meta name="twitter:title" content="Adafruit Circuit Playground Express - Blocks / Javascript editor" />
<meta name="twitter:description" content="A Blocks / JavaScript code editor for the Adafruit Circuit Playground Express." />
<meta name="twitter:image" content="/static/cp/learn/pins-tutorial/touch-input/touch-press.jpg" />

<meta property="og:title" content="Adafruit Circuit Playground Express - Blocks / Javascript editor" />
<meta property="og:site_name" content="Microsoft MakeCode" />
<meta property="og:type" content="website" />
<meta property="og:description" content="A Blocks / JavaScript code editor for the Adafruit Circuit Playground Express." />
<meta property="fb:app_id" content="" />
<meta property="og:image" content="/static/cp/learn/pins-tutorial/touch-input/touch-press.jpg" />

<meta name="format-detection" content="telephone=no">
<link rel="apple-touch-icon" href="docs/static/icons/android-chrome-192x192.png">
<link rel="icon" type="image/png" href="docs/static/icons/android-chrome-192x192.png">
<link rel="shortcut icon" href="docs/static/icons/android-chrome-192x192.png">
<meta name="theme-color" content="#0089BF">

<!-- end include meta.html -->

	
<!-- include head.html -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width,height=device-height,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">

<link rel="stylesheet" data-rtl="/blb/rtlsemantic.css" href="/hostedPXT/semantic.css" />
<link id="blocklycss"  data-rtl="/blb/rtlblockly.css" rel="stylesheet" href="/hostedPXT/blockly.css" />
<link rel="stylesheet" href="/hostedPXT/docfiles/style.css" />
<link rel="stylesheet" href="/hostedPXT/docfiles/vs.css" />
<link rel="stylesheet" href="/hostedPXT/docfiles/target.css" />

<script src="/hostedPXT/jquery.js" type="text/javascript"></script>
<script src="/hostedPXT/semantic.js" type="text/javascript"></script>
<script src="/hostedPXT/docfiles/target.js" type="text/javascript"></script>
<script src="/hostedPXT/embed.js" type="text/javascript"></script>
<script src="/hostedPXT/docfiles/docs.js" type="text/javascript"></script>

<style>
    
.ui.accent { color: #0089BF; }
.ui.inverted.accent { background: #0089BF; }

</style>

<!-- end include head.html -->


</head>

<body id='root' class='root'>
	<div id="accessibleMenu" class="ui accessibleMenu borderless fixed menu docs" role="menubar">
		
            <a href="#maincontent" class="ui item link" tabindex="0" role="menuitem">Skip to main content</a>
        
	</div>

	
<!-- include tocheader.html -->
<div id="top-bar" class="ui fixed accent borderless inverted main menu hideprint docs" role="menubar">
    <div>
        
            <a id="togglesidebar" class="launch icon item" tabindex="0" title="Side menu" aria-label="Side menu" role="menuitem" aria-expanded="false">
                <i class="content icon"></i>
            </a>
        
        <div class="item" role="menuitem">
            <div>
                <a href="/hostedPXT/docs/.html" class="header" tabindex="0" title="Go to editor">
                    <img aria-hidden="true" role="presentation" class="ui mini image" src="docs/static/logo.square.svg" />
                </a>
            </div>
            <div>
                Documentation
            </div>
        </div>
    </div>
    <div>
        <div class="item">
            <form id="tocsearch1" class="search" role="form" method="get" action="https://www.bing.com/search">
                <div class="ui fluid icon input">
                    <input type="hidden" name="q1" value="site:https://makecode.adafruit.com/" />
                    
                <input type="search" name="q" placeholder="Search..." aria-label="Search Documentation">
                <i onclick="document.getElementById('tocsearch1').submit();" tabindex="0" class="search link icon" aria-label="Search" role="button"></i>
            
                </div>
            </form>
        </div>
    </div>
</div>

<div id="side-menu" class="ui vertical accent inverted sidebar menu left hideprint docs" role="menubar">
    <!-- TOC Menu (tocheader.html) -->
    <div class="menuContainer" role="menu">
        
    <a class="item " href="/hostedPXT/docs/about.html" role="menuitem">About</a>


    <a class="item " href="/hostedPXT/docs/faq.html" role="menuitem">FAQ</a>


    <a class="item " href="/hostedPXT/docs/projects.html" role="menuitem">Projects</a>


    <a class="item " href="/hostedPXT/docs/github.html" role="menuitem">GitHub</a>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/examples.html">Examples</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/examples/blinky.html" role="menuitem">Blinky</a>


    <a class="item " href="/hostedPXT/docs/examples/animation-shaker.html" role="menuitem">Animation Shaker</a>


    <a class="item " href="/hostedPXT/docs/examples/juggle-counter.html" role="menuitem">Juggle Counter</a>


    <a class="item " href="/hostedPXT/docs/examples/energy-glove.html" role="menuitem">Energy Glove</a>


    <a class="item " href="/hostedPXT/docs/examples/dice.html" role="menuitem">Dice</a>


    <a class="item " href="/hostedPXT/docs/examples/level.html" role="menuitem">Level</a>


    <a class="item " href="/hostedPXT/docs/examples/counter.html" role="menuitem">Counter</a>


    <a class="item " href="/hostedPXT/docs/examples/egg-game.html" role="menuitem">Egg game</a>


    <a class="item " href="/hostedPXT/docs/examples/reaction.html" role="menuitem">Reaction</a>


    <a class="item " href="/hostedPXT/docs/examples/photon-beatbox.html" role="menuitem">Photon beatbox</a>


    <a class="item " href="/hostedPXT/docs/examples/spin-it.html" role="menuitem">Spin it</a>


    <a class="item " href="/hostedPXT/docs/examples/metronome.html" role="menuitem">Metronome</a>


    <a class="item " href="/hostedPXT/docs/examples/beat-visualizer.html" role="menuitem">Beat visualizer</a>


    <a class="item " href="/hostedPXT/docs/examples/fireflies.html" role="menuitem">Fireflies</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/courses.html">Courses</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/courses/maker.html" role="menuitem">Maker</a>


    <a class="item " href="/hostedPXT/docs/learnsystem/pins-tutorial.html" role="menuitem">Using the Pins</a>


    <a class="item " href="/hostedPXT/docs/learnsystem/logic-lab.html" role="menuitem">Logic Lab</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/reference.html">Reference</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/reference/input.html" role="menuitem">input</a>


    <a class="item " href="/hostedPXT/docs/reference/light.html" role="menuitem">light</a>


    <a class="item " href="/hostedPXT/docs/reference/music.html" role="menuitem">music</a>


    <a class="item " href="/hostedPXT/docs/reference/network.html" role="menuitem">network</a>


    <a class="item " href="/hostedPXT/docs/reference/pins.html" role="menuitem">pins</a>


    <a class="item " href="/hostedPXT/docs/reference/control.html" role="menuitem">control</a>


    <a class="item " href="/hostedPXT/docs/reference/console.html" role="menuitem">console</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/blocks.html">Blocks</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/blocks/on-start.html" role="menuitem">On Start</a>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/blocks/loops.html">Loops</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/blocks/loops/repeat.html" role="menuitem">repeat</a>


    <a class="item " href="/hostedPXT/docs/blocks/loops/for.html" role="menuitem">for</a>


    <a class="item " href="/hostedPXT/docs/blocks/loops/while.html" role="menuitem">while</a>


    <a class="item " href="/hostedPXT/docs/blocks/loops/for-of.html" role="menuitem">for of</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/blocks/logic.html">Logic</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/blocks/logic/if.html" role="menuitem">if</a>


    <a class="item " href="/hostedPXT/docs/blocks/logic/boolean.html" role="menuitem">Boolean</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/blocks/variables.html">Variables</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/blocks/variables/assign.html" role="menuitem">assign</a>


    <a class="item " href="/hostedPXT/docs/blocks/variables/change.html" role="menuitem">change var</a>


    <a class="item " href="/hostedPXT/docs/blocks/variables/var.html" role="menuitem">var</a>

        </div>
    </div>


    <a class="item " href="/hostedPXT/docs/blocks/math.html" role="menuitem">Math</a>


    <a class="item " href="/hostedPXT/docs/blocks/javascript-blocks.html" role="menuitem">JavaScript blocks</a>


    <a class="item " href="/hostedPXT/docs/blocks/custom.html" role="menuitem">Custom blocks</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/python.html">Python</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/python/call.html" role="menuitem">Calling</a>


    <a class="item " href="/hostedPXT/docs/python/sequence.html" role="menuitem">Sequencing</a>


    <a class="item " href="/hostedPXT/docs/python/variables.html" role="menuitem">Variables</a>


    <a class="item " href="/hostedPXT/docs/python/operators.html" role="menuitem">Operators</a>


    <a class="item " href="/hostedPXT/docs/python/statements.html" role="menuitem">Statements</a>


    <a class="item " href="/hostedPXT/docs/python/functions.html" role="menuitem">Functions</a>


    <a class="item " href="/hostedPXT/docs/python/classes.html" role="menuitem">Classes</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/javascript.html">JavaScript</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/javascript/call.html" role="menuitem">Calling</a>


    <a class="item " href="/hostedPXT/docs/javascript/sequence.html" role="menuitem">Sequencing</a>


    <a class="item " href="/hostedPXT/docs/javascript/variables.html" role="menuitem">Variables</a>


    <a class="item " href="/hostedPXT/docs/javascript/operators.html" role="menuitem">Operators</a>


    <a class="item " href="/hostedPXT/docs/javascript/statements.html" role="menuitem">Statements</a>


    <a class="item " href="/hostedPXT/docs/javascript/functions.html" role="menuitem">Functions</a>


    <a class="item " href="/hostedPXT/docs/javascript/types.html" role="menuitem">Types</a>


    <a class="item " href="/hostedPXT/docs/javascript/classes.html" role="menuitem">Classes</a>


    <a class="item " href="/hostedPXT/docs/javascript/interfaces.html" role="menuitem">Interfaces</a>


    <a class="item " href="/hostedPXT/docs/javascript/generics.html" role="menuitem">Generics</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/types.html">Types</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/types/number.html" role="menuitem">Number</a>


    <a class="item " href="/hostedPXT/docs/types/string.html" role="menuitem">String</a>


    <a class="item " href="/hostedPXT/docs/types/boolean.html" role="menuitem">Boolean</a>


    <a class="item " href="/hostedPXT/docs/types/array.html" role="menuitem">Array</a>


    <a class="item " href="/hostedPXT/docs/types/function.html" role="menuitem">Function</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="">Miscellaneous</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/about.html" role="menuitem">About</a>


    <a class="item " href="/hostedPXT/docs/support.html" role="menuitem">Support</a>


    <a class="item " href="/hostedPXT/docs/translate.html" role="menuitem">Translate</a>


    <a class="item " href="/hostedPXT/docs/share.html" role="menuitem">Sharing projects</a>


    <a class="item " href="/hostedPXT/docs/offline.html" role="menuitem">Offline support</a>


    <a class="item " href="/hostedPXT/docs/save.html" role="menuitem">Save</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="">Developers</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/cli.html" role="menuitem">Command Line Interface</a>


    <a class="item " href="/hostedPXT/docs/code.html" role="menuitem">Visual Studio Code support</a>


    <a class="item " href="/hostedPXT/docs/blocks-embed.html" role="menuitem">Blocks Embed</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/projects.html">Projects</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/projects/magic-wand.html" role="menuitem">Magic Wand</a>


    <a class="item " href="/hostedPXT/docs/projects/dandelion.html" role="menuitem">Dandelion</a>


    <a class="item " href="/hostedPXT/docs/projects/fidget-spinner.html" role="menuitem">Fidget Spinner</a>


    <a class="item " href="/hostedPXT/docs/projects/watch-timer.html" role="menuitem">Watch Timer</a>


    <a class="item " href="/hostedPXT/docs/projects/lucky-wheel.html" role="menuitem">Lucky Wheel</a>


    <a class="item " href="/hostedPXT/docs/projects/headlamp.html" role="menuitem">Headlamp</a>


    <a class="item " href="/hostedPXT/docs/projects/guitar.html" role="menuitem">Guitar</a>


    <a class="item " href="/hostedPXT/docs/projects/hot-potato.html" role="menuitem">Hot Potato</a>


    <a class="item " href="/hostedPXT/docs/projects/light-monster.html" role="menuitem">Light Monster</a>


    <a class="item " href="/hostedPXT/docs/projects/reaction.html" role="menuitem">Reaction!</a>


    <a class="item " href="/hostedPXT/docs/projects/wearable-neopixels.html" role="menuitem">Wearable NeoPixels</a>


    <a class="item " href="/hostedPXT/docs/projects/fabric-friend.html" role="menuitem">Fabric Friend</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/hostedPXT/docs/device.html">Hardware</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/hostedPXT/docs/device/simulator.html" role="menuitem">Simulator</a>


    <a class="item " href="/hostedPXT/docs/device/usb.html" role="menuitem">USB</a>

        </div>
    </div>

    </div>
</div>
<!-- end include tocheader.html -->


	<div id="docs" class="pusher">

		<div class="article" id="maincontent">
			<div class="article-inner">

				
<!-- include header.html -->
<div class="ui one column padded grid hideprint">
    <div class="column ui container">
        
    </div>
</div>
<!-- end include header.html -->


				<div class="main ui container fluid mainbody">
					<button id="printbtn" class="circular ui icon right floated button hideprint hidemobile"
						title="Print" aria-label="Print">
						<i class="icon print"></i>
					</button>
					
    <div class="ui text">
        <h1 id="touch-sensing">Touch sensing</h1><p>Some of the pins on your Adafruit Circuit Playground Express are designed to detect when they are touched. Touch sensing uses capacitance to detect when a pin or a conductive surface connected to a pin is touched by you.</p>
<p><img class="ui image" src="/static/cp/learn/pins-tutorial/touch-input/touch-press.jpg" alt="Finger touching a pin" loading="lazy"></p>
<h2 id="human-capacitor">Human capacitor</h2><p>Since the electrical nature of your body is part of touch sensing, let’s first see how your body acts like a capacitor.</p>
<p>Your body has some ability to accept an electric charge. In the past you may have shocked yourself when touching a metal object that has an electrical path to the ground. This is because something gave you a charge such as your clothing, a blanket, or maybe a furry pet. The person in the following picture is holding a fuzzy blanket. Rubbing the blanket creates a charge on their body. When they get ready to touch the knob on the door though, the charge quickly leaves their body and jumps to the door and zap!</p>
<p><img class="ui image" src="/static/cp/learn/pins-tutorial/touch-input/body-static.gif" alt="Static charge on a human body" loading="lazy"></p>
<p>The surface of your body acts like one of the charge plates in a capacitor. A capacitor stores electric charge on two conductive surfaces when a voltage source is appled across it. To estimate it’s effect in electronics, the human body is given a value of about <code>100</code> picofarads (pF) of capacitance.</p>

    <div class="ui info message">
        <div class="content">
            <h4 id="what-s-a-capacitor-">What’s a capacitor?</h4><p>Capacitors and the concept of capacitance are fundamental to the operation of touch sensing. Want to know how capacitors work? Go to the <strong><a  rel="nofollow noopener" href="/hostedPXT/docs/learnsystem/pins-tutorial/devices/capacitors.html">Capacitors</a></strong> lesson and find out more.</p>

        </div>
    </div>
<h2 id="how-a-touch-is-detected">How a touch is detected</h2><p>When you begin to touch the surface of a pin, or a conductor connected to a pin, you change its capacitance. At the moment you come very near the pin (almost just touching it), the capacitance at the pin changes because your body has just provided and additional charge surface making more capacitance at the the pin. The microcontroller can detect and measure this added capacitance. When move away from the pin, the charge decreases to where it was before you touched.</p>
<h3 id="pin-capacitance">Pin capacitance</h3><p>The actual conductive surface of the pin on your board will have some capacitance. The following diagram shows the pin capacitance represented by a capacitor symbol for the pin.</p>
<p><img class="ui image" src="/static/cp/learn/pins-tutorial/touch-input/pin-capacitance.jpg" alt="" loading="lazy"></p>
<p>The microcontroller measures this capacitance to see how much there is when the pin is untouched.</p>
<h3 id="capacitance-change">Capacitance change</h3><p>By touching a pin, your body capacitance will add to the capacitance of the pin making it a larger capacitor. This will make the pin take longer to charge and the microcontroller will notice the difference in charge time.</p>
<p><img class="ui image" src="/static/cp/learn/pins-tutorial/touch-input/touch-capacitance.jpg" alt="" loading="lazy"></p>
<p>Electrically, when you come very close to a pin that’s configured for touch input, your body joins the electric field already setup at the pin. Your body and the pin are <em>capacitively coupled</em> and the effect of the charging source is applied to both the pin and your body.</p>
<p><img class="ui image" src="/static/cp/learn/pins-tutorial/touch-input/pin-touch.gif" alt="" loading="lazy"></p>
<h3 id="capacitor-charge-and-discharge">Capacitor charge and discharge</h3><p>After a voltage is applied to a capacitor it takes time for it to charge completely. Similarly, when a charged capacitor is connected to a lower voltage, it takes some time for it to discharge. A capacitor charges and discharges over time following a pattern similar to this graph.</p>
<p><img class="ui image" src="/static/cp/learn/pins-tutorial/touch-input/charge-discharge.jpg" alt="Capacitor charge and discharge pattern" loading="lazy"></p>
<h3 id="checking-charge-time">Checking charge time</h3><p>There are a few different methods to detect a pin touch but all of them use the idea of measuring charge time on the pin. A constant voltage, such as the supply voltage, is placed on the pin. The microcontroller measures the time it takes for the pin surface to reach a full charge. It remembers this as the charge time for when the pin is untouched. It may repeat this by charging and discharging the pin several times and then use an average of all the measured charge times. This is part of the process of touch <em>calibration</em>.</p>
<p>After calibration, the microcontroller might contunually charge and discharge the pin to see if the charge time ever changes by any significant amount. It first puts the supply voltage on the pin and waits until the pin surface is fully charged. Then, the pin is then is discharged and the process repeats. In this chart, the pin is untouched and the charging voltage is shown red while the pin capacitive charge is graphed in black.</p>
<p><img class="ui image" src="/static/cp/learn/pins-tutorial/touch-input/charge-discharge-notouch.jpg" alt="" loading="lazy"></p>
<p>If the pin capacitance increases by a large enough amount (like when you touch it with your finger), then the microcontroller will determine that the pin was touched and your program can be notified that a touch happened. The following chart shows that the charge time has increased and a the microcontroller can decide that a touch occurred.</p>
<p><img class="ui image" src="/static/cp/learn/pins-tutorial/touch-input/charge-discharge-touched.jpg" alt="" loading="lazy"></p>
<h2 id="experiment-simulate-a-pin-touch">Experiment: Simulate a pin touch</h2><hr>
<p>Using an estimated value for pin capacitance of <code>20</code> picofarads, a charge and discharge cycle is simulated for pin <strong>A1</strong>. The charge level (<code>Vc</code> graph) is plotted in the Data Viewer along with the charging voltage (<code>Charge</code> graph). A touch is detected when the charge time increases by <code>40</code> percent. To simulate a touch on pin <strong>A1</strong>, the total capacitance (variable <code>C</code>) on the pin is increased by <code>100</code> picofarads in an <code>||input:on touch||</code> event when the pin in the simulator is pressed down. A touch and release are simulated by these blocks:</p>
<pre><code class="lang-block">let C = 0
input.touchA1.onEvent(ButtonEvent.Down, function () {
    C += 1e-10
})
input.touchA1.onEvent(ButtonEvent.Up, function () {
    C += -1e-10
})</code></pre>
<p>The touch detection period is shown in a third graph call <code>Touch</code>.</p>
<p><strong>Setup</strong>: Copy the following code into the editor.</p>
<pre><code class="lang-blocks">let Vc = 0
let t = 0
let e = 2.71828
let R = 20000
let C = 2e-11
let Vin = 3.3
let detect = 7 * R * C
let detected = false

input.touchA1.onEvent(ButtonEvent.Down, function () {
    C += 1e-10
})
input.touchA1.onEvent(ButtonEvent.Up, function () {
    C += -1e-10
})

forever(function () {
    Vin = 3.3
    t = 0
    Vc = 0
    while (Vc &lt; Vin * 99 / 100) {
        Vc = Vin * (1 - e ** (t / (R * C)))
        t += -0.0000005
        console.logValue(&quot;Vc&quot;, Vc)
        console.logValue(&quot;Charge&quot;, 3.3)
        if (detected) {
            console.logValue(&quot;Touch&quot;, 1)
        } else {
            console.logValue(&quot;Touch&quot;, 0)
        }
        pause(100)
    }
    if (t * -1 &gt; detect) {
        detected = true
    } else {
        detected = false
    }
    t = 0
    Vin = Vc
    while (Vc &gt; Vin * 1 / 100) {
        Vc = Vin * e ** (t / (R * C))
        t += -0.0000005
        console.logValue(&quot;Vc&quot;, Vc)
        console.logValue(&quot;Charge&quot;, 0)
        if (detected) {
            console.logValue(&quot;Touch&quot;, 1)
        } else {
            console.logValue(&quot;Touch&quot;, 0)
        }
        pause(100)
    }
    pause(100)
})</code></pre>
<p><strong>Test</strong>: Run the code in the simulator and switch to the Data Viewer (click on <strong>Show console</strong>) to see the console output in the chart. Let the program run for a few seconds to observe the charge / discharge pattern. Then, click and hold on the <strong>A1</strong> pin in the simulator for a few more seconds. Unclick the <strong>A1</strong> pin.</p>
<p><img class="ui image" src="/static/cp/learn/pins-tutorial/touch-input/touch-sim.jpg" alt="Charge and discharge simulation" loading="lazy"></p>
<p><strong>Result</strong>: The charge / discharge pattern shown in <strong>Vc</strong> graph will expand during the time that pin <strong>A1</strong> is pressed. The <strong>Touch</strong> detection graph will show that a touch input is dectected when the charge time exceeds the regular charge time for the pin.</p>

    </div>

					<div class="hideprint"></div>
				</div>

			</div>

			
<!-- include footer.html -->
<footer class="ui vertical footer segment hideprint docs inverted" aria-hidden="false">
    <div class="ui center aligned container">
        <div class="ui horizontal link list">
            <a
                class="item"
                href="https://twitter.com/intent/follow?screen_name=MsMakeCode"
                title="Follow us on Twitter"
                target="_blank"
                rel="noopener">
                <i class="huge icon twitter"></i>
            </a>
            <a class="item" href="https://www.youtube.com/channel/UCye7YlvFUUQ1dSy0WZZ1T_Q" title="Subscribe to our YouTube channel"
                target="_blank" rel="noopened">
                <i class="huge icon youtube"></i>
            </a>
            <a class="item" href="mailto:makecode@microsoft.com" title="Send us an Email"
                target="_blank" rel="noopened">
                <i class="huge icon mail"></i>
            </a>
        </div>
        <div class="ui section divider"></div>
        <div class="ui container horizontal small divided link list">
            <a id="langpicker" tabindex="0" class="ui item" rel="noopener">
                <i class="icon xicon globe" aria-hidden="true" role="presentation"></i>Language
            </a>
            <a class="item" href="https://makecode.com/privacy" target="_blank" rel="noopener">Privacy &amp; Cookies</a>
            <a class="item" href="https://makecode.com/termsofuse" target="_blank" rel="noopener">Terms Of Use</a>
            <a class="item" href="https://makecode.com/trademarks" target="_blank" rel="noopener">Trademarks</a>
            <span class="item">© 2020 Microsoft</span>
        </div>
        <div class="ui container horizontal small link list poweredBy">
            <span class="item">Powered by</span>
            <a class="middle aligned" href="https://makecode.com/" title="Microsoft MakeCode"
                target="_blank" rel="noopener">
                <img width="100" src="/static/logo/Microsoft-logo_rgb_c-gray.png" alt="Microsoft">
            </a>
        </div>
    </div>
</footer>

<!-- end include footer.html -->


		</div>

	</div>

    
<!-- include langpicker.html -->
<div id="langmodal" class="ui modal docs" role="dialog" aria-modal="true" aria-describedby="langmodalheader" tabindex="-1">
    <h2 id="langmodalheader" class="header">Select Language</h2>
    <div role="button" class="closeIcon" tabindex="0" aria-label="Close">
        <i class="icon close remove circle" aria-hidden="true"></i>
    </div>

	<div class="content">
	    <div class="group">
            <div id="availablelocales" class="ui cards centered" role="listbox" aria-label="List of available locales"></div>
        </div>
        <div class="ui" id="langmodalfooter">
            <a class="ui" href="/hostedPXT/docs/translate.html" target="_blank" rel="noopener noreferrer">
                How do I add a new language?
            </a>

            <a id="translatebtn" class="ui button" role="button" tabindex="0">
                Translate this page
            </a>
        </div>
    </div>
</div>


<!-- end include langpicker.html -->

	
<!-- include macros.html -->
<!-- macro button -->

<!-- macro vimeo -->

<!-- macro youtube -->

<!-- macro section -->

<!-- macro hide -->

<!-- macro avatar -->

<!-- macro hint -->

<!-- macro codecard -->

<!-- macro tutorialhint -->

<!-- macro reminder -->

<!-- macro alert -->

<!-- macro tip -->

<!-- wrapped around ordinary content -->
<!-- macro main-container -->

<!-- used for 'column' box - they are collected and wrapped in 'column-container' -->
<!-- macro column -->
<!-- macro column-container -->


<!-- Menu on the top of the page -->
<!-- macro item -->

<!-- macro divider -->

<!-- TOC in the sidebar -->
<!-- macro item -->

<!-- macro divider -->

<!-- macro toc-dropdown -->

<!-- macro toc-dropdown-noLink -->

<!-- macro toc-dropdown-noHeading -->

<!-- TODO: duplicates of above for compatability with docsrender.ts;
    remove with pxtlib/docsrender.ts TOC TODOs after cloud bump. -->
<!-- macro top-dropdown -->

<!-- macro top-dropdown-noHeading -->

<!-- macro inner-dropdown -->

<!-- macro nested-dropdown -->
<!-- end include macros.html -->

	
<!-- include tracking.html -->
<script type="text/javascript" src="/hostedPXT/pxtweb.js"></script>
<script type="text/javascript">
    window.loadAppInsights = function (includeCookie) {
        var appInsights=window.appInsights||function(config){
            function i(config){t[config]=function(){var i=arguments;t.queue.push(function(){t[config].apply(t,i)})}}var t={config:config},u=document,e=window,o="script",s="AuthenticatedUserContext",h="start",c="stop",l="Track",a=l+"Event",v=l+"Page",y=u.createElement(o),r,f;y.src=config.url||"https://az416426.vo.msecnd.net/scripts/a/ai.0.js";u.getElementsByTagName(o)[0].parentNode.appendChild(y);try{t.cookie=u.cookie}catch(p){}for(t.queue=[],t.version="1.0",r=["Event","Exception","Metric","PageView","Trace","Dependency"];r.length;)i("track"+r.pop());return i("set"+s),i("clear"+s),i(h+a),i(c+a),i(h+v),i(c+v),i("flush"),config.disableExceptionTracking||(r="onerror",i("_"+r),f=e[r],e[r]=function(config,i,u,e,o){var s=f&&f(config,i,u,e,o);return s!==!0&&t["_"+r](config,i,u,e,o),s}),t
        }({
            instrumentationKey:"9801ed01-c40f-46ec-aa40-2a1742a9e71c",
            disableAjaxTracking: true,
            overridePageViewDuration: false,
            disableExceptionTracking: true,
            isCookieUseDisabled: !includeCookie,
            isStorageUseDisabled: !includeCookie,
            url: "/hostedPXT/ai.0.js"
        });
        window.appInsights=appInsights;
        appInsights.queue.push(function () {
            appInsights.context.addTelemetryInitializer(function (envelope) {
                if (typeof pxtConfig === "undefined" || !pxtConfig) return;
                var telemetryItem = envelope.data.baseData;
                telemetryItem.properties = telemetryItem.properties || {};
                telemetryItem.properties["target"] = pxtConfig.targetId;
                telemetryItem.properties["stage"] = (pxtConfig.relprefix || "/--").replace(/[^a-z]/ig, '')
                telemetryItem.properties["cookie"] = includeCookie;
                if (typeof Windows !== "undefined")
                    telemetryItem.properties["WindowsApp"] = 1;
                var userAgent = navigator.userAgent.toLowerCase();
                var userAgentRegexResult = /\belectron\/(\d+\.\d+\.\d+.*?)(?: |$)/i.exec(userAgent); // Example navigator.userAgent: "Mozilla/5.0 Chrome/61.0.3163.100 Electron/2.0.0 Safari/537.36"
                if (userAgentRegexResult) {
                    telemetryItem.properties["Electron"] = 1;
                    telemetryItem.properties["ElectronVersion"] = userAgentRegexResult[1];
                }
                if (typeof pxtElectron !== "undefined") {
                    telemetryItem.properties["PxtElectron"] = 1;
                    telemetryItem.properties["ElectronVersion"] = pxtElectron.versions.electronVersion;
                    telemetryItem.properties["ChromiumVersion"] = pxtElectron.versions.chromiumVersion;
                    telemetryItem.properties["NodeVersion"] = pxtElectron.versions.nodeVersion;
                    telemetryItem.properties["PxtElectronVersion"] = pxtElectron.versions.pxtElectronVersion;
                    telemetryItem.properties["PxtCoreVersion"] = pxtElectron.versions.pxtCoreVersion;
                    telemetryItem.properties["PxtTargetVersion"] = pxtElectron.versions.pxtTargetVersion;
                    telemetryItem.properties["PxtElectronIsProd"] = pxtElectron.versions.isProd;
                }
            });
        });
        appInsights.trackPageView(null, scrubUrl(window.location.toString()), {urlReferrer: scrubUrl(document.referrer.toString())});

        //Scrub the key (if any) from the URL.
        function scrubUrl(url) {
            var scriptIdRegex = /(?:\d{5}-\d{5}-\d{5}-\d{5})|(?:_[0-9a-zA-Z]{12})/g;
            return url.replace(scriptIdRegex, "xxxxx-xxxxx-xxxxx-xxxxx");
        }
    }
    pxt.initAnalyticsAsync();
</script>
<!-- end include tracking.html -->


</body>

</html>